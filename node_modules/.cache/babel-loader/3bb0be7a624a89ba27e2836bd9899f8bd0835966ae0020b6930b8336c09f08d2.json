{"ast":null,"code":"var _jsxFileName = \"/home/nafis/code/reactjs/interactive-model-workbench/src/components/NotebookArea.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { DndContext, closestCenter } from '@dnd-kit/core';\nimport { SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable';\nimport { useVirtualizer } from '@tanstack/react-virtual';\nimport { useNotebookStore } from '../store/notebookStore';\nimport SortableCell from './SortableCell';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NotebookArea = ({\n  notebook\n}) => {\n  _s();\n  const {\n    addCell,\n    reorderCells\n  } = useNotebookStore();\n  const parentRef = React.useRef(null);\n  const [cellHeights, setCellHeights] = useState(new Map());\n\n  // Calculate dynamic cell height based on content\n  const getCellHeight = cell => {\n    const baseHeight = 120; // Header + padding\n    const contentHeight = cell.content ? Math.max(100, cell.content.split('\\n').length * 20) : 100;\n    const outputHeight = cell.output.length > 0 ? cell.output.length * 80 : 0;\n    return baseHeight + contentHeight + outputHeight;\n  };\n  const virtualizer = useVirtualizer({\n    count: notebook.cells.length,\n    getScrollElement: () => parentRef.current,\n    estimateSize: index => {\n      const cell = notebook.cells[index];\n      return getCellHeight(cell);\n    },\n    overscan: 5\n  });\n\n  // Update virtualizer when cells change\n  useEffect(() => {\n    virtualizer.measure();\n  }, [notebook.cells, virtualizer]);\n  const handleDragEnd = event => {\n    const {\n      active,\n      over\n    } = event;\n    if (over && active.id !== over.id) {\n      const oldIndex = notebook.cells.findIndex(cell => cell.id === active.id);\n      const newIndex = notebook.cells.findIndex(cell => cell.id === over.id);\n      if (oldIndex !== -1 && newIndex !== -1) {\n        reorderCells(notebook.id, oldIndex, newIndex);\n      }\n    }\n  };\n  const handleAddCell = () => {\n    addCell(notebook.id, {\n      type: 'code',\n      content: '',\n      output: [],\n      status: 'idle'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between p-4 border-b border-gray-200 bg-white\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl font-semibold text-gray-900\",\n          children: notebook.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500\",\n          children: [notebook.cells.length, \" cells \\u2022 Last updated \", notebook.updatedAt.toLocaleDateString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: `status-indicator status-${notebook.kernelStatus}`,\n          children: [\"Kernel: \", notebook.kernelStatus]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAddCell,\n          className: \"btn btn-primary\",\n          children: \"+ Add Cell\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-hidden\",\n      children: /*#__PURE__*/_jsxDEV(DndContext, {\n        collisionDetection: closestCenter,\n        onDragEnd: handleDragEnd,\n        children: /*#__PURE__*/_jsxDEV(SortableContext, {\n          items: notebook.cells.map(cell => cell.id),\n          strategy: verticalListSortingStrategy,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: parentRef,\n            className: \"h-full overflow-auto p-4\",\n            style: {\n              height: `${virtualizer.getTotalSize()}px`,\n              width: '100%',\n              position: 'relative'\n            },\n            children: virtualizer.getVirtualItems().map(virtualRow => {\n              const cell = notebook.cells[virtualRow.index];\n              const cellHeight = getCellHeight(cell);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  position: 'absolute',\n                  top: 0,\n                  left: 0,\n                  width: '100%',\n                  height: `${cellHeight}px`,\n                  transform: `translateY(${virtualRow.start}px)`\n                },\n                children: /*#__PURE__*/_jsxDEV(SortableCell, {\n                  cell: cell,\n                  notebookId: notebook.id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 21\n                }, this)\n              }, cell.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(NotebookArea, \"M/9lbhzVTAKiwQYZ1HVplLhQ8AE=\", false, function () {\n  return [useNotebookStore, useVirtualizer];\n});\n_c = NotebookArea;\nexport default NotebookArea;\nvar _c;\n$RefreshReg$(_c, \"NotebookArea\");","map":{"version":3,"names":["React","useState","useEffect","DndContext","closestCenter","SortableContext","verticalListSortingStrategy","useVirtualizer","useNotebookStore","SortableCell","jsxDEV","_jsxDEV","NotebookArea","notebook","_s","addCell","reorderCells","parentRef","useRef","cellHeights","setCellHeights","Map","getCellHeight","cell","baseHeight","contentHeight","content","Math","max","split","length","outputHeight","output","virtualizer","count","cells","getScrollElement","current","estimateSize","index","overscan","measure","handleDragEnd","event","active","over","id","oldIndex","findIndex","newIndex","handleAddCell","type","status","className","children","name","fileName","_jsxFileName","lineNumber","columnNumber","updatedAt","toLocaleDateString","kernelStatus","onClick","collisionDetection","onDragEnd","items","map","strategy","ref","style","height","getTotalSize","width","position","getVirtualItems","virtualRow","cellHeight","top","left","transform","start","notebookId","_c","$RefreshReg$"],"sources":["/home/nafis/code/reactjs/interactive-model-workbench/src/components/NotebookArea.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { DndContext, DragEndEvent, closestCenter } from '@dnd-kit/core';\nimport { SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable';\nimport { useVirtualizer } from '@tanstack/react-virtual';\nimport { useNotebookStore } from '../store/notebookStore';\nimport { Notebook } from '../types';\nimport SortableCell from './SortableCell';\n\ninterface NotebookAreaProps {\n  notebook: Notebook;\n}\n\nconst NotebookArea: React.FC<NotebookAreaProps> = ({ notebook }) => {\n  const { addCell, reorderCells } = useNotebookStore();\n  const parentRef = React.useRef<HTMLDivElement>(null);\n  const [cellHeights, setCellHeights] = useState<Map<string, number>>(new Map());\n\n  // Calculate dynamic cell height based on content\n  const getCellHeight = (cell: any) => {\n    const baseHeight = 120; // Header + padding\n    const contentHeight = cell.content ? Math.max(100, cell.content.split('\\n').length * 20) : 100;\n    const outputHeight = cell.output.length > 0 ? cell.output.length * 80 : 0;\n    return baseHeight + contentHeight + outputHeight;\n  };\n\n  const virtualizer = useVirtualizer({\n    count: notebook.cells.length,\n    getScrollElement: () => parentRef.current,\n    estimateSize: (index) => {\n      const cell = notebook.cells[index];\n      return getCellHeight(cell);\n    },\n    overscan: 5,\n  });\n\n  // Update virtualizer when cells change\n  useEffect(() => {\n    virtualizer.measure();\n  }, [notebook.cells, virtualizer]);\n\n  const handleDragEnd = (event: DragEndEvent) => {\n    const { active, over } = event;\n    \n    if (over && active.id !== over.id) {\n      const oldIndex = notebook.cells.findIndex(cell => cell.id === active.id);\n      const newIndex = notebook.cells.findIndex(cell => cell.id === over.id);\n      \n      if (oldIndex !== -1 && newIndex !== -1) {\n        reorderCells(notebook.id, oldIndex, newIndex);\n      }\n    }\n  };\n\n  const handleAddCell = () => {\n    addCell(notebook.id, {\n      type: 'code',\n      content: '',\n      output: [],\n      status: 'idle',\n    });\n  };\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200 bg-white\">\n        <div>\n          <h1 className=\"text-xl font-semibold text-gray-900\">{notebook.name}</h1>\n          <p className=\"text-sm text-gray-500\">\n            {notebook.cells.length} cells • Last updated {notebook.updatedAt.toLocaleDateString()}\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <span className={`status-indicator status-${notebook.kernelStatus}`}>\n            Kernel: {notebook.kernelStatus}\n          </span>\n          <button\n            onClick={handleAddCell}\n            className=\"btn btn-primary\"\n          >\n            + Add Cell\n          </button>\n        </div>\n      </div>\n\n      {/* Cells Container */}\n      <div className=\"flex-1 overflow-hidden\">\n        <DndContext\n          collisionDetection={closestCenter}\n          onDragEnd={handleDragEnd}\n        >\n          <SortableContext\n            items={notebook.cells.map(cell => cell.id)}\n            strategy={verticalListSortingStrategy}\n          >\n            <div\n              ref={parentRef}\n              className=\"h-full overflow-auto p-4\"\n              style={{\n                height: `${virtualizer.getTotalSize()}px`,\n                width: '100%',\n                position: 'relative',\n              }}\n            >\n              {virtualizer.getVirtualItems().map((virtualRow) => {\n                const cell = notebook.cells[virtualRow.index];\n                const cellHeight = getCellHeight(cell);\n                \n                return (\n                  <div\n                    key={cell.id}\n                    style={{\n                      position: 'absolute',\n                      top: 0,\n                      left: 0,\n                      width: '100%',\n                      height: `${cellHeight}px`,\n                      transform: `translateY(${virtualRow.start}px)`,\n                    }}\n                  >\n                    <SortableCell cell={cell} notebookId={notebook.id} />\n                  </div>\n                );\n              })}\n            </div>\n          </SortableContext>\n        </DndContext>\n      </div>\n    </div>\n  );\n};\n\nexport default NotebookArea; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}